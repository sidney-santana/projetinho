<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador de Personalidade e Montagem de Equipe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .facet-checkbox:checked + label {
            background-color: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-900">Analisador de Personalidade</h1>
            <p class="text-lg text-gray-600 mt-2">Ferramenta baseada no modelo Big Five para análise de perfis e montagem de equipes.</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Seção para Montar Equipe -->
            <div class="bg-white p-6 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold mb-4 border-b pb-2">1. Montar Equipe</h2>
                <p class="mb-4 text-gray-600">Selecione até 6 qualidades desejadas para a função e encontre o candidato mais compatível.</p>
                
                <div id="facetas-container" class="space-y-4 mb-6">
                     <div class="flex flex-wrap gap-2 mt-2">
                        <!-- As facetas serão inseridas aqui pelo JS -->
                     </div>
                </div>
                
                <button id="montar-equipe-btn" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                    Encontrar Melhor Candidato
                </button>
            </div>

            <!-- Seção para Análise Individual -->
            <div class="bg-white p-6 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold mb-4 border-b pb-2">2. Analisar um Perfil Individual</h2>
                <p class="mb-4 text-gray-600">Digite o ID de uma pessoa (0 a 99) para ver sua análise de personalidade detalhada.</p>
                <div class="flex items-center space-x-4">
                    <input type="number" id="pessoa-id-input" min="0" max="99" placeholder="ID da Pessoa (ex: 42)" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <button id="exibir-perfil-btn" class="bg-gray-700 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-800 transition-colors duration-300">
                        Analisar
                    </button>
                </div>
            </div>
        </main>

        <!-- Seção de Resultados -->
        <div id="resultado-container" class="mt-8 bg-white p-6 rounded-2xl shadow-lg hidden">
            <!-- O conteúdo dos resultados será inserido aqui -->
        </div>

    </div>

    <script>
        // --- DADOS E LÓGICA DO PROGRAMA (PORTADO DE PYTHON PARA JAVASCRIPT) ---

        // Matriz que define como cada questão pontua em cada traço
        const questoes = [ [0,1],[1,-1],[1,-1],[2,1],[0,1],[2,1],[4,1],[1,1],[3,1],[4,1],[3,1],[0,-1],[3,1],[4,-1], [1,1],[0,-1],[2,-1],[1,1],[2,-1],[2,1],[4,-1],[2,-1],[4,-1],[3,-1],[3,1],[0,1],[2,1],[1,-1],[0,1],[1,-1], [2,1],[2,1],[3,1],[4,1],[3,1],[4,1],[0,1],[2,-1],[3,1],[1,1],[4,1],[0,-1],[3,-1],[3,1] ];
        
        // Dados brutos das respostas
        const respostasGeral = '4 3 2 4 2 3 2 4 5 4 3 2 5 3 4 2 3 4 4 4 2 4 4 4 5 4 4 2 4 2 4 2 4 3 4 3 4 3 4 3 4 2 1 3 3 4 4 4 3 4 4 4 4 4 4 4 4 4 4 4 4 3 4 4 4 4 4 3 4 4 4 4 4 4 3 5 5 5 5 4 4 4 4 5 5 5 4 4 4 3 4 3 4 3 4 5 2 5 3 1 5 4 5 2 1 5 4 5 1 1 5 2 5 3 5 2 2 1 5 3 5 4 5 4 2 3 5 5 5 1 4 3 2 5 4 3 2 1 5 2 3 4 4 4 4 1 2 4 5 3 5 3 2 5 3 3 4 2 2 4 2 2 2 2 4 4 3 5 2 5 3 1 3 5 2 4 2 4 2 5 2 4 2 5 3 1 3 4 3 5 5 3 2 4 3 3 5 2 5 5 5 2 5 1 3 1 5 5 4 2 5 1 1 2 4 2 3 3 2 3 3 5 4 4 2 3 5 5 4 5 5 5 5 1 5 5 4 5 5 4 1 1 3 5 5 2 5 5 4 3 5 3 5 5 5 5 4 4 5 5 5 5 1 5 3 4 2 4 2 3 3 4 3 2 3 5 4 3 4 4 4 4 4 3 4 4 4 4 5 3 4 2 3 3 3 2 3 2 5 2 4 2 4 4 3 5 2 2 2 4 4 5 2 4 3 4 5 1 5 5 3 5 5 4 4 5 4 3 4 5 4 1 5 2 5 2 2 1 4 2 5 2 5 1 2 2 5 4 5 5 4 4 2 4 4 5 2 3 4 2 5 2 5 5 4 2 4 4 4 4 3 4 4 5 4 2 5 1 5 4 2 1 5 2 5 2 5 1 2 1 5 4 5 5 4 2 5 1 2 4 5 5 1 5 5 1 5 3 5 5 5 3 3 5 3 5 5 2 5 1 5 4 5 1 5 1 5 5 5 2 5 1 5 3 5 5 2 1 1 5 2 3 4 4 4 5 2 5 2 3 2 5 3 3 4 4 2 4 4 4 3 5 3 4 5 1 5 4 2 1 5 4 2 4 1 3 1 1 3 1 4 5 1 2 4 5 4 5 2 2 4 5 3 4 3 4 4 2 5 5 4 5 4 3 4 5 4 2 5 1 5 4 3 2 4 2 4 4 3 3 2 4 5 4 5 3 1 3 3 4 1 4 3 5 2 4 3 4 2 2 3 1 5 1 2 4 4 5 1 3 2 4 5 3 5 4 3 1 4 5 2 4 4 3 3 1 3 2 5 2 4 2 3 2 4 2 4 4 2 5 4 2 4 3 4 3 5 3 2 5 3 4 4 3 4 2 5 3 5 1 3 1 5 1 5 2 4 2 4 3 5 4 3 3 1 4 5 2 5 4 4 4 1 4 3 1 2 4 5 4 4 4 2 5 4 4 3 2 1 3 4 2 5 4 3 3 5 4 3 4 5 3 3 3 3 5 5 1 1 2 3 1 1 3 4 4 1 5 5 1 5 2 5 2 4 2 2 5 1 5 1 2 2 2 5 5 5 1 5 2 5 3 5 4 5 3 5 1 5 5 5 1 1 3 3 4 2 4 2 1 2 4 3 1 4 3 3 5 4 4 2 4 5 4 5 3 5 3 3 3 4 3 1 1 4 3 4 1 3 3 1 3 4 5 1 3 1 5 3 2 1 3 1 4 2 5 3 3 4 4 3 1 5 5 3 5 3 3 1 3 1 2 5 3 5 1 2 1 2 2 5 5 4 5 2 1 5 1 5 4 2 2 3 3 4 4 2 5 1 4 4 1 4 4 2 5 4 3 2 4 3 5 3 3 4 2 5 2 4 1 4 1 5 3 4 2 5 2 4 1 3 4 3 4 2 2 4 3 1 5 2 5 1 5 5 5 3 4 2 4 4 4 2 5 3 5 4 4 3 3 5 4 5 1 4 1 5 5 4 2 4 3 4 1 5 3 5 2 4 4 3 4 4 5 1 4 4 4 4 4 4 4 4 1 4 5 2 4 5 5 1 3 2 4 4 1 4 2 2 1 4 3 4 4 4 4 2 4 4 4 5 4 2 4 4 1 1 3 3 3 1 4 4 2 4 3 4 3 4 3 1 5 3 3 4 3 3 4 4 5 5 1 5 1 4 2 3 2 3 3 4 2 3 2 3 3 2 4 5 3 2 3 2 3 4 4 3 3 4 3 3 2 4 3 1 5 4 3 2 3 2 3 5 5 5 3 5 3 4 4 3 4 3 4 5 5 4 3 5 1 2 3 3 3 4 4 3 4 2 4 3 1 4 2 3 3 3 3 2 4 2 3 2 2 3 2 5 3 5 1 3 1 5 3 5 3 5 2 4 2 4 4 3 3 5 5 4 2 4 4 4 4 2 4 4 4 4 4 4 2 4 4 5 4 5 3 2 5 2 4 3 2 4 2 2 2 4 2 4 4 1 4 2 4 2 3 4 3 1 4 5 4 4 3 4 2 1 4 4 2 3 4 5 5 5 4 4 5 4 2 4 3 4 3 5 5 5 3 3 1 3 2 3 1 4 2 4 3 3 4 3 2 3 2 2 4 5 5 2 4 4 4 4 4 4 5 4 2 4 4 2 4 5 3 2 3 1 4 4 1 4 3 2 1 3 3 4 4 3 4 3 4 4 3 4 4 2 4 3 3 2 2 3 4 1 3 4 1 3 4 3 4 3 3 3 4 4 2 4 2 4 2 3 2 5 2 3 1 4 2 3 2 3 1 3 4 4 3 1 3 2 4 4 2 4 3 3 2 2 4 4 2 4 2 3 3 4 3 2 4 3 4 2 3 2 2 5 3 5 2 3 2 4 3 4 3 4 3 4 3 4 4 4 3 4 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 3 2 4 2 5 3 3 2 5 3 4 4 2 4 5 3 3 3 3 1 5 1 3 5 3 4 2 2 1 4 2 2 5 3 5 2 4 2 2 5 3 3 2 3 4 2 4 1 3 5 3 2 5 2 4 3 1 3 5 2 3 3 3 1 5 1 4 3 2 4 3 2 1 4 2 2 5 2 5 2 4 2 1 5 3 3 3 3 2 3 4 4 5 1 5 3 1 4 4 4 4 4 3 2 5 4 4 1 2 2 2 3 2 5 1 1 1 5 3 4 4 3 3 1 2 3 4 5 4 1 4 2 2 4 5 4 2 3 4 5 4 5 5 5 4 5 5 1 5 5 5 2 5 1 1 5 2 5 2 4 4 2 2 5 5 5 2 5 5 5 1 5 1 1 5 5 1 4 5 3 5 1 5 4 2 4 2 3 2 5 2 1 5 2 5 3 2 4 2 5 5 5 1 4 1 5 3 4 3 5 1 4 1 5 3 5 2 3 3 3 3 2 5 4 2 3 5 5 4 5 2 5 2 5 4 4 5 4 5 2 5 4 2 5 2 4 1 3 2 5 2 5 2 5 3 5 5 5 5 4 2 1 5 3 3 2 5 4 2 3 5 5 4 5 2 5 2 5 4 4 5 4 5 3 5 4 2 5 2 5 1 3 2 5 2 5 2 5 3 5 5 5 5 4 2 1 5 4 5 4 5 2 5 4 4 4 5 5 5 4 5 5 4 2 4 1 4 4 1 4 1 4 1 5 3 5 1 4 5 4 1 5 1 2 2 4 2 5 4 5 1 4 1 5 5 5 3 1 2 5 5 5 3 5 2 3 3 1 3 2 5 2 4 3 4 5 4 3 4 5 4 2 4 5 4 5 3 3 1 3 3 5 3 2 5 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 2 4 4 4 3 4 4 4 4 4 4 3 3 3 4 3 3 3 2 4 4 4 4 4 4 4 4 4 2 3 3 3 4 4 4 4 4 4 4 4 4 4 3 3 4 2 4 4 5 4 2 2 4 5 5 4 2 4 5 5 5 5 4 5 5 5 5 3 5 4 3 2 2 2 3 3 3 4 5 5 5 5 4 3 5 5 2 3 4 5 3 2 5 5 4 5 3 5 5 1 5 4 5 5 3 2 2 5 2 1 5 2 4 3 2 1 2 2 5 5 5 5 4 5 5 4 5 4 1 4 2 4 1 4 1 3 2 4 1 1 1 5 4 4 4 5 2 4 4 3 4 4 4 3 2 3 5 1 2 1 4 2 4 2 2 1 1 4 3 4 4 5 1 3 4 1 4 4 2 5 1 5 4 3 4 2 4 2 5 2 1 4 2 5 2 1 2 3 3 3 5 2 3 1 5 4 3 4 4 4 3 1 3 4 5 2 1 1 4 1 4 4 2 4 1 5 4 3 4 2 4 2 5 2 1 3 2 5 2 1 2 3 3 4 4 1 3 1 5 4 3 4 4 4 4 1 3 4 5 2 1 1 2 2 4 4 3 3 1 5 5 3 5 5 5 3 5 4 4 4 4 4 1 4 2 2 5 4 5 5 4 3 4 3 5 4 5 5 4 4 5 4 5 4 1 5 2 1 2 4 1 5 1 4 3 2 4 5 3 4 4 5 2 4 5 4 5 4 5 5 5 2 5 2 4 1 4 3 3 2 4 1 4 1 4 5 3 5 2 3 4 3 4 4 2 3 2 4 3 5 3 2 3 2 4 4 3 4 5 3 3 4 2 4 4 3 4 5 4 3 5 2 4 4 2 5 3 2 3 2 5 2 2 3 4 5 3 4 2 5 2 3 5 2 1 4 4 2 5 5 1 5 4 5 1 2 1 5 2 2 5 3 1 1 5 2 3 5 4 3 1 4 3 4 5 3 2 3 5 5 1 4 5 2 5 3 4 5 3 4 5 4 5 5 5 5 5 3 3 5 4 5 5 4 5 5 2 1 5 5 2 5 5 5 5 5 5 5 5 1 1 5 2 3 1 4 1 4 1 5 4 5 3 5 3 2 5 5 2 5 2 4 1 2 1 5 2 2 5 1 3 1 4 4 5 5 4 3 3 2 2 5 5 4 4 1 2 3 1 5 1 5 1 5 3 5 3 4 3 2 5 5 4 5 3 4 1 1 1 5 2 2 5 1 3 1 4 3 5 5 3 2 3 2 3 5 5 4 4 1 3 5 2 5 3 5 5 5 5 5 5 5 5 3 5 5 2 5 3 5 3 4 2 5 5 1 5 1 3 1 5 4 5 4 4 2 3 4 3 5 5 5 5 5 4 4 3 3 1 2 5 5 5 2 5 3 5 3 5 5 5 5 5 4 1 5 5 2 5 4 5 4 1 2 5 3 5 4 5 4 5 3 5 4 5 4 1 1 3 4 4 5 4 2 1 3 5 2 4 4 2 4 4 2 2 4 4 5 4 2 4 3 4 3 5 2 3 2 4 3 3 2 5 2 3 2 4 2 4 3 3 1 4 2 4 4 5 4 2 4 4 4 4 3 2 2 4 4 1 4 5 5 1 2 4 5 4 2 4 3 3 1 4 4 4 2 4 4 4 5 2 2 5 2 4 1 3 2 1 5 3 4 2 5 4 3 4 5 5 5 4 3 2 5 2 5 2 3 5 4 5 3 5 1 4 1 5 4 5 2 3 2 4 1 4 4 4 3 2 3 5 1 1 4 5 5 3 5 4 2 4 1 4 2 5 2 3 5 3 3 5 1 3 4 5 5 5 2 5 1 5 5 5 3 4 1 5 2 5 4 5 1 1 2 3 5 5 4 2 4 5 4 3 5 5 3 5 1 5 5 5 5 5 4 1 4 2 5 5 3 5 5 4 2 4 2 5 5 5 5 4 3 5 4 5 5 1 5 5 1 3 1 5 5 1 4 2 1 3 2 5 5 4 3 2 5 2 3 2 4 3 1 2 5 5 1 3 4 5 4 5 5 4 5 3 4 5 2 5 3 1 1 4 3 3 2 1 3 2 5 3 2 3 3 1 4 5 2 3 4 4 4 2 2 4 2 5 3 5 5 3 3 5 3 4 2 3 1 3 3 4 1 3 4 5 3 1 2 3 4 1 4 2 2 3 1 3 5 2 5 5 5 2 5 3 4 2 2 4 4 1 1 1 1 2 1 4 4 3 3 3 1 1 1 3 5 5 5 4 2 4 2 2 5 3 5 3 5 4 4 5 3 4 1 5 4 1 5 3 4 1 4 4 4 4 5 5 2 5 1 5 4 5 5 5 5 5 1 4 3 5 1 1 3 4 3 4 5 2 5 1 4 3 4 2 2 2 2 4 3 3 4 1 4 1 2 4 5 3 4 5 1 4 4 5 5 1 5 3 4 3 2 2 1 5 1 5 3 3 4 4 4 3 4 2 3 2 3 2 5 4 3 3 4 3 4 2 4 2 4 3 3 4 2 4 3 3 2 4 3 4 4 4 2 3 2 3 2 4 4 2 3 3 3 4 4 3 4 2 3 3 4 3 4 4 2 3 4 2 4 2 4 4 4 3 3 4 2 4 3 3 2 4 3 4 3 4 3 3 3 4 3 5 4 1 3 5 3 5 5 2 5 3 4 3 4 3 2 1 2 4 3 3 4 1 4 2 4 4 5 4 4 4 1 3 4 5 5 2 5 2 4 2 3 1 1 5 1 5 2 4 1 3 2 3 3 1 5 3 3 2 2 3 4 5 1 3 4 4 4 2 2 4 3 3 5 5 3 4 3 5 4 2 5 3 3 4 4 3 4 5 1 5 2 4 2 3 3 2 4 2 4 2 2 2 4 2 3 4 5 4 4 4 3 2 3 2 3 4 2 5 3 3 2 4 2 1 4 3 3 3 4 4 4 4 3 3 3 3 2 2 4 4 4 2 4 2 2 2 4 2 2 4 4 4 4 4 3 2 3 3 4 4 2 5 3 4 4 4 4 2 4 4 4 2 4 3 3 3 4 2 3 2 4 1 5 2 3 3 5 3 1 4 5 3 5 5 4 2 5 3 3 5 2 4 4 5 2 5 1 2 1 5 4 4 2 5 1 2 2 5 3 4 3 2 3 3 4 2 4 3 4 1 4 4 1 4 5 5 4 5 4 2 5 5 4 2 5 4 4 5 2 5 1 3 1 5 4 5 3 4 3 2 4 5 3 3 4 1 5 3 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 1 3 4 5 5 3 1 5 1 3 3 3 3 4 2 3 3 3 4 4 4 2 3 1 2 3 4 4 5 3 2 3 5 2 4 3 4 3 5 3 4 3 2 4 4 3 1 3 3 3 3 3 4 2 1 4 4 4 5 3 3 1 4 3 3 2 2 4 4 3 2 3 5 2 3 4 4 3 4 3 3 3 3 2 3 3 1 4 3 2 1 3 4 3 2 3 2 2 3 3 4 4 4 2 2 1 4 3 3 2 3 4 4 3 3 3 5 2 3 4 4 3 4 3 3 3 3 2 3 4 1 4 2 2 1 3 4 3 3 3 3 2 3 3 4 2 5 2 2 4 3 3 4 4 4 1 5 4 2 5 4 4 4 4 3 2 4 4 4 4 3 4 4 5 3 4 2 4 2 4 3 5 2 4 2 3 3 4 3 3 4 2 4 5 1 4 3 3 5 1 4 4 4 3 1 4 2 4 1 2 5 2 4 1 2 2 2 5 5 4 2 5 3 4 4 2 4 3 4 5 2 5 2 4 1 2 3 5 4 1 5 4 5 1 4 5 1 5 3 3 5 5 3 1 5 1 5 5 1 5 4 5 5 5 4 5 1 5 5 5 1 5 1 5 1 5 5 4 3 3 4 2 4 5 5 3 5 5 4 3 4 3 4 4 3 4 4 1 4 4 4 2 2 3 3 3 1 5 1 3 4 5 3 5 5 5 3 3 4 5 5 5 5 1 4';
        
        // Processamento dos dados brutos
        const listaLimpa = respostasGeral.split(/\s+/).filter(item => item);
        const matrizRespostas = [];
        for (let i = 0; i < listaLimpa.length; i += 44) {
            matrizRespostas.push(listaLimpa.slice(i, i + 44).map(Number));
        }

        const tracos = ['Extroversão', 'Amabilidade', 'Conscienciosidade', 'Abertura', 'Neuroticismo'];
        const mapaFacetas = [
            ["Calorosidade", "Gregariedade", "Assertividade", "Atividade", "Busca de Entusiasmo", "Emoções Positivas"],
            ["Confiança", "Franqueza", "Altruísmo", "Conformidade", "Modéstia", "Empatia"],
            ["Competência", "Ordem", "Senso de Dever", "Esforço por Realização", "Autodisciplina", "Deliberação"],
            ["Fantasia", "Estética", "Sentimentos", "Ações", "Ideias", "Valores"],
            ["Atenção a problemas", "Bravura", "Sensibilidade", "Discrição", "Impulsividade", "Vulnerabilidade"]
        ];
        const vetorFacetas = mapaFacetas.flat();
        
        // Função para calcular os traços de personalidade
        function calcularTracos(matrizRespostas) {
            const resultados = [];
            for (const pessoa of matrizRespostas) {
                let extroversao = 0, afabilidade = 0, conscienciosidade = 0, abertura = 0, neuroticismo = 0;
                for (let l = 0; l < 44; l++) {
                    const [tracoAtual, poloAtual] = questoes[l];
                    const respostaAtual = pessoa[l];
                    let pontosRodada = 0;
                    if (poloAtual === 1) {
                        pontosRodada += respostaAtual - 1;
                    } else {
                        pontosRodada += 5 - respostaAtual;
                    }

                    if (tracoAtual === 0) extroversao += pontosRodada;
                    else if (tracoAtual === 1) afabilidade += pontosRodada;
                    else if (tracoAtual === 2) conscienciosidade += pontosRodada;
                    else if (tracoAtual === 3) abertura += pontosRodada;
                    else if (tracoAtual === 4) neuroticismo += pontosRodada;
                }
                resultados.push([
                    extroversao / 8,
                    afabilidade / 8,
                    conscienciosidade / 10,
                    abertura / 10,
                    neuroticismo / 8
                ]);
            }
            return resultados;
        }

        // Pré-calcula todos os resultados ao carregar a página
        const matrizResultados = calcularTracos(matrizRespostas);

        // --- LÓGICA DA INTERFACE ---

        const facetasContainer = document.querySelector('#facetas-container > div');
        const montarEquipeBtn = document.getElementById('montar-equipe-btn');
        const exibirPerfilBtn = document.getElementById('exibir-perfil-btn');
        const pessoaIdInput = document.getElementById('pessoa-id-input');
        const resultadoContainer = document.getElementById('resultado-container');

        // Função para popular as facetas na tela
        function popularFacetas() {
            let html = '';
            vetorFacetas.forEach((faceta, index) => {
                const facetaId = index + 1;
                html += `
                    <div>
                        <input type="checkbox" id="faceta-${facetaId}" value="${facetaId}" class="facet-checkbox hidden">
                        <label for="faceta-${facetaId}" class="cursor-pointer text-sm border border-gray-300 rounded-full px-4 py-2 hover:bg-gray-200 transition-colors">${faceta}</label>
                    </div>
                `;
            });
            facetasContainer.innerHTML = html;
        }

        // Função para exibir os resultados na tela
        function exibirClassificacoes(resultadosPessoa, pessoaId, titulo) {
            const rosto = `
                <pre class="text-xs md:text-sm leading-tight font-mono bg-gray-100 p-4 rounded-lg text-center mx-auto">
 .----------------.
| .--------------. |
| |    ^    ^    | |
| |      o       | |
| |     \\_/      | |
| |              | |
| '--------------' |
 '----------------'
                </pre>
            `;

            const classificacoes = { maiores: [], menores: [], medianos: [] };
            resultadosPessoa.forEach((res, i) => {
                const item = { traco: tracos[i], valor: res };
                if (res > 2.5) classificacoes.maiores.push(item);
                else if (res < 1.5) classificacoes.menores.push(item);
                else classificacoes.medianos.push(item);
            });

            const criarListaHTML = (lista, cor) => lista.length > 0 ? lista.map(item => `
                <li class="flex justify-between items-center p-2 rounded-md">
                    <span>${item.traco}</span>
                    <span class="font-bold ${cor}">${item.valor.toFixed(3)}</span>
                </li>`).join('') : '<li class="p-2 text-gray-500">Nenhum</li>';
            
            const criarGraficoHTML = (resultados) => resultados.map((res, i) => `
                <div class="mb-2">
                    <div class="flex justify-between text-sm mb-1">
                        <span class="font-medium">${tracos[i]}</span>
                        <span>${res.toFixed(2)} / 4.00</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-blue-500 h-2.5 rounded-full" style="width: ${(res / 4) * 100}%"></div>
                    </div>
                </div>
            `).join('');

            const html = `
                <h2 class="text-2xl font-bold mb-4 text-center">${titulo}</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-start">
                    <div class="md:col-span-1 flex flex-col items-center">
                        ${rosto}
                        <p class="text-center mt-2 text-gray-600 font-mono">Perfil #${pessoaId}</p>
                    </div>
                    <div class="md:col-span-2 space-y-4">
                        <div>
                            <h3 class="text-lg font-semibold text-green-600 mb-2">Traços Acentuados (&gt; 2.5)</h3>
                            <ul class="bg-green-50 rounded-lg p-2">${criarListaHTML(classificacoes.maiores, 'text-green-700')}</ul>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-red-600 mb-2">Traços no Polo Oposto (&lt; 1.5)</h3>
                            <ul class="bg-red-50 rounded-lg p-2">${criarListaHTML(classificacoes.menores, 'text-red-700')}</ul>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-yellow-600 mb-2">Traços Medianos (1.5 - 2.5)</h3>
                            <ul class="bg-yellow-50 rounded-lg p-2">${criarListaHTML(classificacoes.medianos, 'text-yellow-700')}</ul>
                        </div>
                    </div>
                </div>
                <div class="mt-8 border-t pt-6">
                    <h3 class="text-xl font-semibold mb-4 text-center">Visualização Gráfica do Perfil</h3>
                    ${criarGraficoHTML(resultadosPessoa)}
                </div>
            `;

            resultadoContainer.innerHTML = html;
            resultadoContainer.classList.remove('hidden');
            resultadoContainer.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Event listener para o botão de montar equipe
        montarEquipeBtn.addEventListener('click', () => {
            const qualidadesSelecionadas = Array.from(document.querySelectorAll('.facet-checkbox:checked')).map(cb => parseInt(cb.value));

            if (qualidadesSelecionadas.length === 0) {
                alert('Por favor, selecione pelo menos uma qualidade.');
                return;
            }
            if (qualidadesSelecionadas.length > 6) {
                alert('Por favor, selecione no máximo 6 qualidades.');
                return;
            }

            const pontos = [0, 0, 0, 0, 0];
            qualidadesSelecionadas.forEach(el => {
                if (el >= 1 && el <= 6) pontos[0]++;
                else if (el > 6 && el <= 12) pontos[1]++;
                else if (el > 12 && el <= 18) pontos[2]++;
                else if (el > 18 && el <= 24) pontos[3]++;
                else pontos[4]++;
            });

            let maior = -1, indiceMaior = -1;
            // CORREÇÃO: Usar '>=' para lidar com empates, escolhendo o último traço com a pontuação máxima.
            pontos.forEach((p, i) => {
                if (p >= maior) {
                    maior = p;
                    indiceMaior = i;
                }
            });

            let pessoaMaisAptaId = -1;
            let maiorPontuacao = -1;
            matrizResultados.forEach((pessoa, id) => {
                if (pessoa[indiceMaior] > maiorPontuacao) {
                    maiorPontuacao = pessoa[indiceMaior];
                    pessoaMaisAptaId = id;
                }
            });
            
            const tracoPrincipal = tracos[indiceMaior];
            const titulo = `Candidato Ideal Encontrado! (Traço principal: ${tracoPrincipal})`;
            exibirClassificacoes(matrizResultados[pessoaMaisAptaId], pessoaMaisAptaId, titulo);
        });

        // Event listener para o botão de exibir perfil individual
        exibirPerfilBtn.addEventListener('click', () => {
            const pessoaId = parseInt(pessoaIdInput.value);
            if (isNaN(pessoaId) || pessoaId < 0 || pessoaId >= matrizResultados.length) {
                alert('Por favor, insira um ID válido (0 a 99).');
                return;
            }
            const titulo = `Análise do Perfil #${pessoaId}`;
            exibirClassificacoes(matrizResultados[pessoaId], pessoaId, titulo);
        });

        // Inicializa a interface
        popularFacetas();
    </script>
</body>
</html>
